<head>
    <script language="javascript" type="text/javascript" src="../static/js/kinetic_min.js"></script>
    <style>
        body {padding:20px;}
        #container{
          border:solid 1px #ccc;
          margin-top: 10px;
          width:350px;
          height:350px;
        }
    </style>
</head>
<body>
    <button id="myButton">Button</button>
    <div id="container"></div>
</body>
<script>
$(function(){

    // create the Kinetic stage and layer
    var stage = new Kinetic.Stage({
        container: 'container',
        width: 350,
        height: 350
    });
    var layer = new Kinetic.Layer();
    stage.add(layer);

    // put the paths to your images in imageURLs
    var imageURLs=[];
    imageURLs.push('http://www.html5canvastutorials.com/demos/assets/yoda.jpg');
    imageURLs.push('http://images6.alphacoders.com/451/451028.jpg');
    imageURLs.push('http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg');
    var imagesOK=0;
    var imgs=[];

    // fully load every image, then call the start function
    loadAllImages(start);

    function loadAllImages(callback){
        for (var i=0; i<imageURLs.length; i++) {
            var img = new Image();
            imgs.push(img);
            img.onload = function(){ 
                imagesOK++; 
                if (imagesOK>=imageURLs.length ) {
                    callback();
                }
            };
            img.onerror=function(){alert("image load failed");} 
            img.crossOrigin="anonymous";
            img.src = imageURLs[i];
        }      
    }

    function start(){
        // the imgs[] array holds fully loaded images
        // the imgs[] are in the same order as imageURLs[]

        // make each image into a draggable Kinetic.Image
        for(var i=0;i<imgs.length;i++){
            var img=new Kinetic.Image({
                x:i*75+15,
                y:i*75+15,
                width:60,
                height:60,
                image:imgs[i],
                draggable:true
            });
            layer.add(img);
        }
        layer.draw();
    }

}); // end $(function(){});
</script>
